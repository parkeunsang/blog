<!DOCTYPE html>
<html>

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>[Python] 기관, 외국인 거래량이 많으면 주가가 하락한다? -2편</title>
  <meta name="description" content="Abstract이전포스트에서는 기관 매매량 급증후 30영업일(약 40일)후 주가변화를 살펴보았고, 약 3500번 정도의 case에 대해서 평균 1.3%의 주가하락이 이어졌음을 확인했다. 이번에는 기관 매매량 급증 신호뿐만아니라 외국인 매매량 급증과 급락 신호에따른 주가변화를 살펴보...">
  
  <meta name="author" content="EunSang Park">
  <meta name="copyright" content="&copy; EunSang Park 2023">
  

  <!-- External libraries --> 
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-9ndCyUaIbzAi2FUVXJi0CjmCapSmO7SnpJef0486qhLnuZ2cdeRhO02iuK6FUUVM" crossorigin="anonymous">
  <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css">
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.9.0/styles/monokai-sublime.min.css">
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/lightbox2/2.7.1/css/lightbox.css">

  <!-- Favicon and other icons (made with http://www.favicon-generator.org/) -->
  <link rel="shortcut icon" href="/blog/assets/icons/favicon.ico" type="image/x-icon">
  <link rel="icon" href="/blog/assets/icons/favicon.ico" type="image/x-icon">
  <link rel="apple-touch-icon" sizes="57x57" href="/blog/assets/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/blog/assets/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/blog/assets/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/blog/assets/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/blog/assets/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/blog/assets/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/blog/assets/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/blog/assets/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/blog/assets/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192"  href="/blog/assets/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/blog/assets/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/blog/assets/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/blog/assets/icons/favicon-16x16.png">
  <link rel="manifest" href="/blog/assets/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/blog/assets/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">

  
  <!-- Facebook OGP cards -->
  <meta property="og:description" content="Abstract이전포스트에서는 기관 매매량 급증후 30영업일(약 40일)후 주가변화를 살펴보았고, 약 3500번 정도의 case에 대해서 평균 1.3%의 주가하락이 이어졌음을 확인했다. 이번에는 기관 매매량 급증 신호뿐만아니라 외국인 매매량 급증과 급락 신호에따른 주가변화를 살펴보..." />
  <meta property="og:url" content="https://parkeunsang.github.io/stock/2021/01/28/stock.html">
  <meta property="og:site_name" content="Edward's blog" />
  <meta property="og:title" content="[Python] 기관, 외국인 거래량이 많으면 주가가 하락한다? -2편" />
  <meta property="og:type" content="website" />
  <meta property="og:image" content="https://parkeunsang.github.io/blog/assets/instacode.png" />
  <meta property="og:image:type" content="image/png" />
  <meta property="og:image:width" content="612" />
  <meta property="og:image:height" content="605" />
  

  
  <!-- Twitter: card tags -->
  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="[Python] 기관, 외국인 거래량이 많으면 주가가 하락한다? -2편">
  <meta name="twitter:description" content="Abstract이전포스트에서는 기관 매매량 급증후 30영업일(약 40일)후 주가변화를 살펴보았고, 약 3500번 정도의 case에 대해서 평균 1.3%의 주가하락이 이어졌음을 확인했다. 이번에는 기관 매매량 급증 신호뿐만아니라 외국인 매매량 급증과 급락 신호에따른 주가변화를 살펴보...">
  <meta name="twitter:image" content="https://parkeunsang.github.io/blog/assets/instacode.png">
  <meta name="twitter:url" content="https://parkeunsang.github.io/stock/2021/01/28/stock.html">
  

  

  <!-- Site styles -->
  <link rel="stylesheet" href="/blog/css/main.css">
  <link rel="canonical" href="https://parkeunsang.github.io/blog/stock/2021/01/28/stock.html">
	<link rel="alternate" type="application/rss+xml" title="Edward's blog" href="https://parkeunsang.github.io/blog/feed.xml" />
	
	<!-- Tooltips -->
	<script type="text/javascript">
		window.tooltips = []
	</script>
  <script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script>
</head>


  <body>

    <header class="navigation" role="banner">
  <div class="navigation-wrapper">
    <a href="/blog/" class="logo">
      
      <img src="/blog/assets/homepage.png" alt="Edward's blog">
      
    </a>
    <a href="javascript:void(0)" class="navigation-menu-button" id="js-mobile-menu">
      <i class="fa fa-bars"></i>
    </a>
    <nav role="navigation">
      <ul id="js-navigation-menu" class="navigation-menu show">
				
	
	<li class="nav-link"><a href="/blog/about/">About</a>
	

	
	<li class="nav-link"><a href="/blog/category/">Categories</a>
	

	

	

	
	<li class="nav-link"><a href="/blog/posts/">Posts</a>
	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	


      </ul>
    </nav>
  </div>
</header>


    <div class="page-content">
        <div class="post">

<div class="post-header-container has-cover" style="background-image: url(/blog/assets/instacode.png);">
  <div class="scrim has-cover">
    <header class="post-header">
      <h1 class="title">[Python] 기관, 외국인 거래량이 많으면 주가가 하락한다? -2편</h1>
      <p class="info">by <strong>Edward Park</strong></p>
    </header>
  </div>
</div>

<div class="wrapper">



<section class="post-meta">
  <div class="post-date">January 28, 2021</div>
  <div class="post-categories">
  in 
    
    <a href="/blog/posts">Stock</a>
    
  
  </div>
</section>

<article class="post-content">
  <h2 id="abstract">Abstract</h2>
<p><a href="https://parkeunsang.github.io/blog/stock/2021/01/19/python.html">이전포스트</a>에서는 <strong>기관 매매량 급증</strong>후 30영업일(약 40일)후 주가변화를 살펴보았고, 약 3500번 정도의 case에 대해서 평균 1.3%의 주가하락이 이어졌음을 확인했다. 이번에는 기관 매매량 급증 신호뿐만아니라 <strong>외국인 매매량 급증</strong>과 급락 신호에따른 주가변화를 살펴보며 또 이전에 설정했던 여러 parameter들(이동평균 값(이전에는 10일 사용), n영업일 후(이전에는 30 사용))을 변화시키며 어떤 경우에 이익, 손해를 보는지 살펴보자.</p>

<h2 id="store-result-by-parameters">Store result by parameters</h2>

<pre><code class="language-Python"># 이전 코드는 이전포스트 참조
# 40이 끝
criteriaList = [-2.5, 2.5]  # 2.5는 기관/외인 매매량 급증, -2.5는 급락신호
windowList = [10, 30]  # Moving average값(10 or 30)
dayLaterList = [1, 5, 10, 30, 60]  # n영업일 후 주가 변화
whoList = ['inst_sum', 'foreign_sum']  # inst_sum: 기관, foreign_sum: 외인
resultList = []
i=0
for cri in criteriaList:
    for win in windowList:
        for day in dayLaterList:
            for who in whoList:
                resultDic = {}
                resultDic['criteria'] = cri
                resultDic['window'] = win
                resultDic['dayLater'] = day
                resultDic['who'] = who
                print(i, end="-")
                i+=1
                result = np.array([])
                for code in codes:
                    tss = TradeStradegy(code, cri, win, day, who)
                    stdg1 = tss.stradegy1()
                    changeSelected = stdg1[0]
                    result = np.append(result, changeSelected)
                resultDic['result'] = result
                resultList.append(resultDic)
</code></pre>
<p>결과는 아래와 같다.(result순으로 오름차순 정렬)</p>
<pre><code class="language-Python">for i in range(len(resultList)):
    resultList[i]['result'] = np.mean(resultList[i]['result'])

pd.DataFrame(resultList).sort_values("result").reset_index(drop=True)
</code></pre>
<p><img src="/blog/post_images/tradeWho3_1.png" title="sample images" />
.<br />
.<br />
.<br />
<img src="/blog/post_images/tradeWho3_2.png" title="sample images" />
먼저 위의 표를 보는법을 예시를통해 간단히 설명하기위해 첫번째 열(row)의 값들을 보자.<br />
<strong>who</strong>열이 foreign_sum이고 <strong>critera</strong>가 2.5이므로 <strong>외인의 순매매량이 급증</strong>한 이후 60영업일(<strong>dayLater</strong>값) 후 주가는 평균적으로 <strong>4.5%(1-result)</strong> 하락했다. 라고 해석할 수 있다. 여기서 window값은 moving average 값으로 이값이 클수록 순매매량을 완만하게 변환했음을 뜻한다.<br />
여기서 눈여겨볼점은 기관이나 외인의 매매량이 급증, 급락한 이후 대체로 주가는 하락했다는 것이다. Index가 0, 2인행을 살펴보면 외국인의 순매매량이 급증, 급락한 60영업일 이후 평균적으로 주가는 4%이상 감소했다.<br />
이러한 현상에대한 해석에는 다양한 관점이 있겠지만, 개인적인 생각으로는 외인이나 기관이 단기적으로 수익을 실현하는 경우가 많기때문이라고 생각된다. 여하튼 처음 생각했던것과는 달리 <strong>외인, 기관의 순매매량이 급증했다는 신호가 주가에 부정적인 영향일 미쳤</strong>으며 이는 순매매량이 급락했을때도 마찬가지로 부정적인 영향을 가져왔다. 즉 한마디로 <font color="red">기관, 외인의 주식에대한 관심이 중, 장기적(30, 60영업일 후)으로 주가에 부정적인 영향을 미친다</font>라고 설명할 수 있겠다.</p>

<h2 id="next">Next</h2>
<p>위의 분석의 경우 모든 코스피 주식에 대해 기관, 외인의 순매매량 신호계산을 동일하게 했지만, 사실 주식에 따라 기관, 외인의 보유비중, 매매비중 등은 다를것이다. 그래서 이러한 변수를 추가해 분석에 활용하면 보다 정확한 분석이 될것이다. 또한 단순히 해당 주식의 기관, 외인 순매매량만을 보는것이아니라 이러한 급증, 급락신호가 나타났을 때 <strong>주가의 상태(스토캐스틱, 볼린저밴드 변수 값,  거래량 등)</strong> 를 추가 변수로 활용한다면(예를들어 기관 순매매량이 급증했을때, 스토캐스틱 값이 낮은 상태면 장기적으로 주가는 상승할 것) 보다 좋은 분석을 할 수 있을 것이다.</p>

</article>
<!-- <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script> -->



<section class="tags">
  <!-- <strong>Tags:</strong> <a href="/blog/tag/Stock">Stock</a> -->
  <strong>Tags:</strong> <a href="https://www.google.co.kr/search?q=Stock">Stock</a>
</section>


<!-- <section class="rss">
  <p class="rss-subscribe text"><strong>Subscribe <a href="/blog/feed.xml">via RSS</a></strong></p>
</section> -->

<section class="share">
  <span>Share: </span>
  
    
    
    
    
    
    
    
    
  
    
    
    
    
    
    
    
    
  
    
    
    
    
    
    
    
    
  
    
    
    
    
    
    
      <a href="//www.pinterest.com/pin/create/button/?description=%5BPython%5D+%EA%B8%B0%EA%B4%80%2C+%EC%99%B8%EA%B5%AD%EC%9D%B8+%EA%B1%B0%EB%9E%98%EB%9F%89%EC%9D%B4+%EB%A7%8E%EC%9C%BC%EB%A9%B4+%EC%A3%BC%EA%B0%80%EA%B0%80+%ED%95%98%EB%9D%BD%ED%95%9C%EB%8B%A4%3F+-2%ED%8E%B8&url=https%3A%2F%2Fparkeunsang.github.io%2Fblog%2Fstock%2F2021%2F01%2F28%2Fstock.html&media=https://parkeunsang.github.io/blog/assets/instacode.png"
        onclick="window.open(this.href, 'pinterest-share', 'width=550,height=255');return false;">
        <i class="fa fa-pinterest-square fa-lg"></i>
      </a>
    
    
    
  
    
    
    
    
    
    
    
    
  
    
    
    
    
    
    
    
    
  
    
    
    
    
    
    
    
    
  
    
    
    
    
    
    
    
    
  
    
    
    
    
    
    
    
    
  
    
    
    
    
    
    
    
    
  
    
    
    
    
    
    
    
      <a href="//www.reddit.com/submit" onclick="window.location = '//www.reddit.com/submit?url=' + encodeURIComponent('https://parkeunsang.github.io/blog/stock/2021/01/28/stock.html') + '&title=[Python] 기관, 외국인 거래량이 많으면 주가가 하락한다? -2편'; return false">
        <i class="fa fa-reddit-square fa-lg"></i>
      </a>
    
    
  
    
    
    
    
    
    
    
    
  
</section>




</div>
</div>

    </div>

    <footer class="site-footer">

  <div class="wrapper">

    <h3 class="footer-heading">Edward's blog</h3>

    <div class="site-navigation">

      <p><strong>Site Map</strong></p>
      <ul class="pages">
				
	
	<li class="nav-link"><a href="/blog/about/">About</a>
	

	
	<li class="nav-link"><a href="/blog/category/">Categories</a>
	

	

	

	
	<li class="nav-link"><a href="/blog/posts/">Posts</a>
	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	

	


      </ul>
    </div>

    <div class="site-contact">

      <p><strong>Contact</strong></p>
      <ul class="social-media-list">
        <li>
          <a href="mailto:edwardfdsp@gmail.com">
            <i class="fa fa-envelope-o"></i>
            <span class="username">edwardfdsp@gmail.com</span>
          </a>
        </li>

        
          
          <li>
            <a href="https://github.com/parkeunsang" title="Fork me on GitHub">
              <i class="fa fa-github"></i>
              <span class="username">EunSang Park</span>
            </a>
          </li>
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        

      </ul>
    </div>

    <!-- <div class="site-signature">
      <p class="rss-subscribe text"><strong>Subscribe <a href="/blog/feed.xml">via RSS</a></strong></p>
      <p class="text">contents
</p>
    </div> -->

  </div>

</footer>

<!-- Scripts -->
<script src="//code.jquery.com/jquery-3.4.1.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.10/highlight.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/lightbox2/2.11.1/js/lightbox.min.js"></script>
<script src="//unpkg.com/popper.js@1"></script>
<script src="//unpkg.com/tippy.js@5"></script>

<script type="text/javascript">
$(document).ready(function() {
  // Default syntax highlighting
  hljs.initHighlightingOnLoad();

  // Header
  var menuToggle = $('#js-mobile-menu').unbind();
  $('#js-navigation-menu').removeClass("show");
  menuToggle.on('click', function(e) {
    e.preventDefault();
    $('#js-navigation-menu').slideToggle(function(){
      if($('#js-navigation-menu').is(':hidden')) {
        $('#js-navigation-menu').removeAttr('style');
      }
    });
  });

	// Enable tooltips via Tippy.js
	if (Array.isArray(window.tooltips)) {
		window.tooltips.forEach(function(tooltip) {
			var selector = tooltip[0];
			var config = tooltip[1];
			tippy(selector, config);
		})
	}
});

</script>






  </body>

</html>
